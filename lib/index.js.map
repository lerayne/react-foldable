{"version":3,"sources":["../src/index.jsx"],"names":["Foldable","props","state","expanded","bodyStyle","carrotStyle","timeout","animationSpeed","speed","onToggle","title","children","className","animationStyle","transition","classNames","main","join","cursor","toggle","childrenContainer","element","console","log","height","onHeightReady","close","open","setState","clearTimeout","setTimeout","offsetHeight","transform"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by M. Yegorov on 2016-04-29.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ReactHeight from 'react-height';\r\nimport css from './Foldable.css';\r\n\r\nexport default class Foldable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            expanded: props.expanded || false,\r\n            bodyStyle: {},\r\n            carrotStyle: {},\r\n            timeout: false,\r\n            animationSpeed: props.speed || 200\r\n        };\r\n\r\n        if (typeof this.props.onToggle == 'function') {\r\n            this.onToggle = (...args) => {\r\n                this.props.onToggle(...args);\r\n            }\r\n        } else {\r\n            this.onToggle = () => {}\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {title, children, className}  = this.props;\r\n        const {bodyStyle, carrotStyle, animationSpeed} = this.state;\r\n\r\n        const animationStyle = {\r\n            transition: `all ${animationSpeed}ms ease`\r\n        };\r\n\r\n        const classNames = [\r\n            css.main,\r\n            className\r\n        ];\r\n\r\n        return <div className={classNames.join(' ')}>\r\n            <div className=\"caption\" style={{cursor:'pointer'}} onClick={e => this.toggle()}>\r\n                <span className=\"carrot\" style={{...animationStyle, ...carrotStyle}}/>\r\n                <span className=\"title\">{title}</span>\r\n            </div>\r\n            <div className=\"body\" style={{...animationStyle, ...bodyStyle}}>\r\n                <div ref={element => this.childrenContainer = element} className=\"children-container\">\r\n                    <ReactHeight onHeightReady={height => {console.log('react-height', height);this.onHeightReady(height)}}>\r\n                        {children}\r\n                    </ReactHeight>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    toggle() {\r\n        if (this.state.expanded) {\r\n            this.close()\r\n        } else {\r\n            this.open()\r\n        }\r\n    }\r\n\r\n    onHeightReady(height) {\r\n\r\n        if (this.state.expanded) {\r\n            this.setState({\r\n                bodyStyle: {height: height},\r\n            }, () => {\r\n                if (typeof this.props.onHeightReady == 'function') {\r\n                    this.props.onHeightReady(height)\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    open() {\r\n        if (!this.state.expanded) {\r\n\r\n            if (this.state.timeout) {\r\n                clearTimeout(this.state.timeout)\r\n            }\r\n\r\n            const timeout = setTimeout(()=> {\r\n                this.setState({\r\n                    bodyStyle: {height: this.childrenContainer.offsetHeight},\r\n                    carrotStyle: {transform: 'rotate(0deg)'}\r\n                }, () => setTimeout(() => this.onToggle(this.childrenContainer.offsetHeight), this.state.animationSpeed))\r\n            });\r\n\r\n            this.setState({\r\n                expanded: true,\r\n                timeout\r\n            });\r\n        }\r\n    }\r\n\r\n    close() {\r\n        if (this.state.expanded) {\r\n\r\n            if (this.state.timeout) {\r\n                clearTimeout(this.state.timeout)\r\n            }\r\n\r\n            const timeout = setTimeout(()=> {\r\n                this.setState({\r\n                    expanded: false\r\n                }, () => this.onToggle(0));\r\n                \r\n            }, this.state.animationSpeed);\r\n\r\n            this.setState({\r\n                bodyStyle: {},\r\n                carrotStyle: {},\r\n                timeout\r\n            });\r\n        }\r\n    }\r\n}"]}