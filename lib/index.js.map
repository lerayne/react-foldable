{"version":3,"sources":["../src/index.jsx"],"names":["Foldable","props","state","expanded","bodyStyle","carrotStyle","carrotStyleOpen","transform","timeout","animationSpeed","speed","onToggle","title","children","className","animationStyle","transition","classNames","main","push","join","cursor","toggle","carrot","childrenContainer","element","onHeightReady","close","open","setState","height","offsetHeight","clearTimeout","setTimeout"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by M. Yegorov on 2016-04-29.\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport ReactHeight from 'react-height';\r\nimport css from './Foldable.css';\r\n\r\nexport default class Foldable extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            expanded: props.expanded || false,\r\n            bodyStyle: {},\r\n            carrotStyle: props.expanded ? props.carrotStyleOpen || {transform: 'rotate(0deg)'} : {},\r\n            timeout: false,\r\n            animationSpeed: props.speed || 200\r\n        };\r\n\r\n        if (typeof this.props.onToggle == 'function') {\r\n            this.onToggle = (...args) => {\r\n                this.props.onToggle(...args);\r\n            }\r\n        } else {\r\n            this.onToggle = () => {}\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const {title, children, className}  = this.props;\r\n        const {expanded, bodyStyle, carrotStyle, animationSpeed} = this.state;\r\n\r\n        const animationStyle = {\r\n            transition: `all ${animationSpeed}ms ease`\r\n        };\r\n\r\n        const classNames = [\r\n            css.main,\r\n            className\r\n        ];\r\n        \r\n        if (expanded) {\r\n            classNames.push('expanded')\r\n        }\r\n\r\n        return <div className={classNames.join(' ')}>\r\n            <div className=\"caption\" style={{cursor:'pointer'}} onClick={e => this.toggle()}>\r\n                <span className=\"carrot\" style={{...animationStyle, ...carrotStyle}}>\r\n                    {this.props.carrot || null}\r\n                </span>\r\n                <span className=\"title\">{title}</span>\r\n            </div>\r\n            <div className=\"body\" style={{...animationStyle, ...bodyStyle}}>\r\n                <div ref={element => this.childrenContainer = element} className=\"children-container\">\r\n                    <ReactHeight onHeightReady={height => this.onHeightReady()}>\r\n                        {children}\r\n                    </ReactHeight>\r\n                </div>\r\n            </div>\r\n        </div>;\r\n    }\r\n\r\n    toggle() {\r\n        if (this.state.expanded) {\r\n            this.close()\r\n        } else {\r\n            this.open()\r\n        }\r\n    }\r\n\r\n    onHeightReady() {\r\n\r\n        if (this.state.expanded) {\r\n            \r\n            this.setState({\r\n                bodyStyle: {height: this.childrenContainer.offsetHeight}\r\n            }, () => {\r\n                if (typeof this.props.onHeightReady == 'function') {\r\n                    this.props.onHeightReady(this.childrenContainer.offsetHeight)\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    open() {\r\n        if (!this.state.expanded) {\r\n\r\n            if (this.state.timeout) {\r\n                clearTimeout(this.state.timeout)\r\n            }\r\n\r\n            const timeout = setTimeout(()=> {\r\n                this.setState({\r\n                    bodyStyle: {height: this.childrenContainer.offsetHeight},\r\n                    carrotStyle: this.props.carrotStyleOpen || {transform: 'rotate(0deg)'}\r\n                }, () => setTimeout(() => this.onToggle(this.childrenContainer.offsetHeight), this.state.animationSpeed))\r\n            });\r\n\r\n            this.setState({\r\n                expanded: true,\r\n                timeout\r\n            });\r\n        }\r\n    }\r\n\r\n    close() {\r\n        if (this.state.expanded) {\r\n\r\n            if (this.state.timeout) {\r\n                clearTimeout(this.state.timeout)\r\n            }\r\n\r\n            const timeout = setTimeout(()=> {\r\n                this.setState({\r\n                    expanded: false\r\n                }, () => this.onToggle(0));\r\n                \r\n            }, this.state.animationSpeed);\r\n\r\n            this.setState({\r\n                bodyStyle: {},\r\n                carrotStyle: {},\r\n                timeout\r\n            });\r\n        }\r\n    }\r\n}"]}